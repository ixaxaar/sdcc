                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.3.1 #8898 (Nov 27 2013) (Linux)
                                      4 ; This file was generated Wed Nov 27 12:27:50 2013
                                      5 ;--------------------------------------------------------
                                      6 	.module rand
                                      7 	.optsdcc -mmcs51 --model-small
                                      8 	
                                      9 ;--------------------------------------------------------
                                     10 ; Public variables in this module
                                     11 ;--------------------------------------------------------
                                     12 	.globl _rand
                                     13 	.globl _srand
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 	.area RSEG    (ABS,DATA)
      000000                         18 	.org 0x0000
                                     19 ;--------------------------------------------------------
                                     20 ; special function bits
                                     21 ;--------------------------------------------------------
                                     22 	.area RSEG    (ABS,DATA)
      000000                         23 	.org 0x0000
                                     24 ;--------------------------------------------------------
                                     25 ; overlayable register banks
                                     26 ;--------------------------------------------------------
                                     27 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         28 	.ds 8
                                     29 ;--------------------------------------------------------
                                     30 ; internal ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area DSEG    (DATA)
      000000                         33 _next:
      000000                         34 	.ds 4
                                     35 ;--------------------------------------------------------
                                     36 ; overlayable items in internal ram 
                                     37 ;--------------------------------------------------------
                                     38 	.area	OSEG    (OVR,DATA)
                                     39 ;--------------------------------------------------------
                                     40 ; indirectly addressable internal ram data
                                     41 ;--------------------------------------------------------
                                     42 	.area ISEG    (DATA)
                                     43 ;--------------------------------------------------------
                                     44 ; absolute internal ram data
                                     45 ;--------------------------------------------------------
                                     46 	.area IABS    (ABS,DATA)
                                     47 	.area IABS    (ABS,DATA)
                                     48 ;--------------------------------------------------------
                                     49 ; bit data
                                     50 ;--------------------------------------------------------
                                     51 	.area BSEG    (BIT)
                                     52 ;--------------------------------------------------------
                                     53 ; paged external ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area PSEG    (PAG,XDATA)
                                     56 ;--------------------------------------------------------
                                     57 ; external ram data
                                     58 ;--------------------------------------------------------
                                     59 	.area XSEG    (XDATA)
                                     60 ;--------------------------------------------------------
                                     61 ; absolute external ram data
                                     62 ;--------------------------------------------------------
                                     63 	.area XABS    (ABS,XDATA)
                                     64 ;--------------------------------------------------------
                                     65 ; external initialized ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area XISEG   (XDATA)
                                     68 	.area HOME    (CODE)
                                     69 	.area GSINIT0 (CODE)
                                     70 	.area GSINIT1 (CODE)
                                     71 	.area GSINIT2 (CODE)
                                     72 	.area GSINIT3 (CODE)
                                     73 	.area GSINIT4 (CODE)
                                     74 	.area GSINIT5 (CODE)
                                     75 	.area GSINIT  (CODE)
                                     76 	.area GSFINAL (CODE)
                                     77 	.area CSEG    (CODE)
                                     78 ;--------------------------------------------------------
                                     79 ; global & static initialisations
                                     80 ;--------------------------------------------------------
                                     81 	.area HOME    (CODE)
                                     82 	.area GSINIT  (CODE)
                                     83 	.area GSFINAL (CODE)
                                     84 	.area GSINIT  (CODE)
                                     85 ;	rand.c:31: static unsigned long int next = 1;
      000000 75*00 01         [24]   86 	mov	_next,#0x01
      000003 E4               [12]   87 	clr	a
      000004 F5*01            [12]   88 	mov	(_next + 1),a
      000006 F5*02            [12]   89 	mov	(_next + 2),a
      000008 F5*03            [12]   90 	mov	(_next + 3),a
                                     91 ;--------------------------------------------------------
                                     92 ; Home
                                     93 ;--------------------------------------------------------
                                     94 	.area HOME    (CODE)
                                     95 	.area HOME    (CODE)
                                     96 ;--------------------------------------------------------
                                     97 ; code
                                     98 ;--------------------------------------------------------
                                     99 	.area CSEG    (CODE)
                                    100 ;------------------------------------------------------------
                                    101 ;Allocation info for local variables in function 'rand'
                                    102 ;------------------------------------------------------------
                                    103 ;	rand.c:33: int rand(void)
                                    104 ;	-----------------------------------------
                                    105 ;	 function rand
                                    106 ;	-----------------------------------------
      000000                        107 _rand:
                           000007   108 	ar7 = 0x07
                           000006   109 	ar6 = 0x06
                           000005   110 	ar5 = 0x05
                           000004   111 	ar4 = 0x04
                           000003   112 	ar3 = 0x03
                           000002   113 	ar2 = 0x02
                           000001   114 	ar1 = 0x01
                           000000   115 	ar0 = 0x00
                                    116 ;	rand.c:35: next = next * 1103515245UL + 12345;
      000000 85*00*00         [24]  117 	mov	__mullong_PARM_2,_next
      000003 85*01*01         [24]  118 	mov	(__mullong_PARM_2 + 1),(_next + 1)
      000006 85*02*02         [24]  119 	mov	(__mullong_PARM_2 + 2),(_next + 2)
      000009 85*03*03         [24]  120 	mov	(__mullong_PARM_2 + 3),(_next + 3)
      00000C 90 4E 6D         [24]  121 	mov	dptr,#0x4E6D
      00000F 75 F0 C6         [24]  122 	mov	b,#0xC6
      000012 74 41            [12]  123 	mov	a,#0x41
      000014 12r00r00         [24]  124 	lcall	__mullong
      000017 AC 82            [24]  125 	mov	r4,dpl
      000019 AD 83            [24]  126 	mov	r5,dph
      00001B AE F0            [24]  127 	mov	r6,b
      00001D FF               [12]  128 	mov	r7,a
      00001E 74 39            [12]  129 	mov	a,#0x39
      000020 2C               [12]  130 	add	a,r4
      000021 F5*00            [12]  131 	mov	_next,a
      000023 74 30            [12]  132 	mov	a,#0x30
      000025 3D               [12]  133 	addc	a,r5
      000026 F5*01            [12]  134 	mov	(_next + 1),a
      000028 E4               [12]  135 	clr	a
      000029 3E               [12]  136 	addc	a,r6
      00002A F5*02            [12]  137 	mov	(_next + 2),a
      00002C E4               [12]  138 	clr	a
      00002D 3F               [12]  139 	addc	a,r7
      00002E F5*03            [12]  140 	mov	(_next + 3),a
                                    141 ;	rand.c:36: return (unsigned int)(next/65536) % (RAND_MAX + 1U);
      000030 AC*02            [24]  142 	mov	r4,(_next + 2)
      000032 AD*03            [24]  143 	mov	r5,(_next + 3)
      000034 8C 82            [24]  144 	mov	dpl,r4
      000036 74 7F            [12]  145 	mov	a,#0x7F
      000038 5D               [12]  146 	anl	a,r5
      000039 F5 83            [12]  147 	mov	dph,a
      00003B 22               [24]  148 	ret
                                    149 ;------------------------------------------------------------
                                    150 ;Allocation info for local variables in function 'srand'
                                    151 ;------------------------------------------------------------
                                    152 ;seed                      Allocated to registers r6 r7 
                                    153 ;------------------------------------------------------------
                                    154 ;	rand.c:39: void srand(unsigned int seed)
                                    155 ;	-----------------------------------------
                                    156 ;	 function srand
                                    157 ;	-----------------------------------------
      00003C                        158 _srand:
      00003C AE 82            [24]  159 	mov	r6,dpl
      00003E AF 83            [24]  160 	mov	r7,dph
                                    161 ;	rand.c:41: next = seed;
      000040 8E*00            [24]  162 	mov	_next,r6
      000042 8F*01            [24]  163 	mov	(_next + 1),r7
      000044 75*02 00         [24]  164 	mov	(_next + 2),#0x00
      000047 75*03 00         [24]  165 	mov	(_next + 3),#0x00
      00004A 22               [24]  166 	ret
                                    167 	.area CSEG    (CODE)
                                    168 	.area CONST   (CODE)
                                    169 	.area XINIT   (CODE)
                                    170 	.area CABS    (ABS,CODE)
