                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.3.1 #8898 (Nov 27 2013) (Linux)
                                      4 ; This file was generated Wed Nov 27 12:27:53 2013
                                      5 ;--------------------------------------------------------
                                      6 	.module _strncpy
                                      7 	.optsdcc -mmcs51 --model-medium
                                      8 	
                                      9 ;--------------------------------------------------------
                                     10 ; Public variables in this module
                                     11 ;--------------------------------------------------------
                                     12 	.globl _strncpy_PARM_3
                                     13 	.globl _strncpy_PARM_2
                                     14 	.globl _strncpy
                                     15 ;--------------------------------------------------------
                                     16 ; special function registers
                                     17 ;--------------------------------------------------------
                                     18 	.area RSEG    (ABS,DATA)
      000000                         19 	.org 0x0000
                                     20 ;--------------------------------------------------------
                                     21 ; special function bits
                                     22 ;--------------------------------------------------------
                                     23 	.area RSEG    (ABS,DATA)
      000000                         24 	.org 0x0000
                                     25 ;--------------------------------------------------------
                                     26 ; overlayable register banks
                                     27 ;--------------------------------------------------------
                                     28 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         29 	.ds 8
                                     30 ;--------------------------------------------------------
                                     31 ; internal ram data
                                     32 ;--------------------------------------------------------
                                     33 	.area DSEG    (DATA)
                                     34 ;--------------------------------------------------------
                                     35 ; overlayable items in internal ram 
                                     36 ;--------------------------------------------------------
                                     37 	.area	OSEG    (OVR,DATA)
      000000                         38 _strncpy_sloc0_1_0:
      000000                         39 	.ds 3
                                     40 ;--------------------------------------------------------
                                     41 ; indirectly addressable internal ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area ISEG    (DATA)
                                     44 ;--------------------------------------------------------
                                     45 ; absolute internal ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area IABS    (ABS,DATA)
                                     48 	.area IABS    (ABS,DATA)
                                     49 ;--------------------------------------------------------
                                     50 ; bit data
                                     51 ;--------------------------------------------------------
                                     52 	.area BSEG    (BIT)
                                     53 ;--------------------------------------------------------
                                     54 ; paged external ram data
                                     55 ;--------------------------------------------------------
                                     56 	.area PSEG    (PAG,XDATA)
      000000                         57 _strncpy_PARM_2:
      000000                         58 	.ds 3
      000003                         59 _strncpy_PARM_3:
      000003                         60 	.ds 2
      000005                         61 _strncpy_d_1_21:
      000005                         62 	.ds 3
      000008                         63 _strncpy_d1_1_22:
      000008                         64 	.ds 3
                                     65 ;--------------------------------------------------------
                                     66 ; external ram data
                                     67 ;--------------------------------------------------------
                                     68 	.area XSEG    (XDATA)
                                     69 ;--------------------------------------------------------
                                     70 ; absolute external ram data
                                     71 ;--------------------------------------------------------
                                     72 	.area XABS    (ABS,XDATA)
                                     73 ;--------------------------------------------------------
                                     74 ; external initialized ram data
                                     75 ;--------------------------------------------------------
                                     76 	.area XISEG   (XDATA)
                                     77 	.area HOME    (CODE)
                                     78 	.area GSINIT0 (CODE)
                                     79 	.area GSINIT1 (CODE)
                                     80 	.area GSINIT2 (CODE)
                                     81 	.area GSINIT3 (CODE)
                                     82 	.area GSINIT4 (CODE)
                                     83 	.area GSINIT5 (CODE)
                                     84 	.area GSINIT  (CODE)
                                     85 	.area GSFINAL (CODE)
                                     86 	.area CSEG    (CODE)
                                     87 ;--------------------------------------------------------
                                     88 ; global & static initialisations
                                     89 ;--------------------------------------------------------
                                     90 	.area HOME    (CODE)
                                     91 	.area GSINIT  (CODE)
                                     92 	.area GSFINAL (CODE)
                                     93 	.area GSINIT  (CODE)
                                     94 ;--------------------------------------------------------
                                     95 ; Home
                                     96 ;--------------------------------------------------------
                                     97 	.area HOME    (CODE)
                                     98 	.area HOME    (CODE)
                                     99 ;--------------------------------------------------------
                                    100 ; code
                                    101 ;--------------------------------------------------------
                                    102 	.area CSEG    (CODE)
                                    103 ;------------------------------------------------------------
                                    104 ;Allocation info for local variables in function 'strncpy'
                                    105 ;------------------------------------------------------------
                                    106 ;sloc0                     Allocated with name '_strncpy_sloc0_1_0'
                                    107 ;------------------------------------------------------------
                                    108 ;	_strncpy.c:33: char *strncpy (
                                    109 ;	-----------------------------------------
                                    110 ;	 function strncpy
                                    111 ;	-----------------------------------------
      000000                        112 _strncpy:
                           000007   113 	ar7 = 0x07
                           000006   114 	ar6 = 0x06
                           000005   115 	ar5 = 0x05
                           000004   116 	ar4 = 0x04
                           000003   117 	ar3 = 0x03
                           000002   118 	ar2 = 0x02
                           000001   119 	ar1 = 0x01
                           000000   120 	ar0 = 0x00
      000000 AD 82            [24]  121 	mov	r5,dpl
      000002 AE 83            [24]  122 	mov	r6,dph
      000004 AF F0            [24]  123 	mov	r7,b
                                    124 ;	_strncpy.c:38: register char * d1 =  d;
      000006 78r08            [12]  125 	mov	r0,#_strncpy_d1_1_22
      000008 ED               [12]  126 	mov	a,r5
      000009 F2               [24]  127 	movx	@r0,a
      00000A 08               [12]  128 	inc	r0
      00000B EE               [12]  129 	mov	a,r6
      00000C F2               [24]  130 	movx	@r0,a
      00000D 08               [12]  131 	inc	r0
      00000E EF               [12]  132 	mov	a,r7
      00000F F2               [24]  133 	movx	@r0,a
                                    134 ;	_strncpy.c:40: while ( n && *s )
      000010 78r03            [12]  135 	mov	r0,#_strncpy_PARM_3
      000012 E2               [24]  136 	movx	a,@r0
      000013 FB               [12]  137 	mov	r3,a
      000014 08               [12]  138 	inc	r0
      000015 E2               [24]  139 	movx	a,@r0
      000016 FC               [12]  140 	mov	r4,a
      000017 78r00            [12]  141 	mov	r0,#_strncpy_PARM_2
      000019 E2               [24]  142 	movx	a,@r0
      00001A F5*00            [12]  143 	mov	_strncpy_sloc0_1_0,a
      00001C 08               [12]  144 	inc	r0
      00001D E2               [24]  145 	movx	a,@r0
      00001E F5*01            [12]  146 	mov	(_strncpy_sloc0_1_0 + 1),a
      000020 08               [12]  147 	inc	r0
      000021 E2               [24]  148 	movx	a,@r0
      000022 F5*02            [12]  149 	mov	(_strncpy_sloc0_1_0 + 2),a
      000024                        150 00102$:
      000024 EB               [12]  151 	mov	a,r3
      000025 4C               [12]  152 	orl	a,r4
      000026 60 2D            [24]  153 	jz	00114$
      000028 85*00 82         [24]  154 	mov	dpl,_strncpy_sloc0_1_0
      00002B 85*01 83         [24]  155 	mov	dph,(_strncpy_sloc0_1_0 + 1)
      00002E 85*02 F0         [24]  156 	mov	b,(_strncpy_sloc0_1_0 + 2)
      000031 12r00r00         [24]  157 	lcall	__gptrget
      000034 FA               [12]  158 	mov	r2,a
      000035 60 1E            [24]  159 	jz	00114$
                                    160 ;	_strncpy.c:42: n-- ;
      000037 1B               [12]  161 	dec	r3
      000038 BB FF 01         [24]  162 	cjne	r3,#0xFF,00129$
      00003B 1C               [12]  163 	dec	r4
      00003C                        164 00129$:
                                    165 ;	_strncpy.c:43: *d++ = *s++ ;
      00003C 05*00            [12]  166 	inc	_strncpy_sloc0_1_0
      00003E E4               [12]  167 	clr	a
      00003F B5*00 02         [24]  168 	cjne	a,_strncpy_sloc0_1_0,00130$
      000042 05*01            [12]  169 	inc	(_strncpy_sloc0_1_0 + 1)
      000044                        170 00130$:
      000044 8D 82            [24]  171 	mov	dpl,r5
      000046 8E 83            [24]  172 	mov	dph,r6
      000048 8F F0            [24]  173 	mov	b,r7
      00004A EA               [12]  174 	mov	a,r2
      00004B 12r00r00         [24]  175 	lcall	__gptrput
      00004E A3               [24]  176 	inc	dptr
      00004F AD 82            [24]  177 	mov	r5,dpl
      000051 AE 83            [24]  178 	mov	r6,dph
                                    179 ;	_strncpy.c:45: while ( n-- )
      000053 80 CF            [24]  180 	sjmp	00102$
      000055                        181 00114$:
      000055 78r05            [12]  182 	mov	r0,#_strncpy_d_1_21
      000057 ED               [12]  183 	mov	a,r5
      000058 F2               [24]  184 	movx	@r0,a
      000059 08               [12]  185 	inc	r0
      00005A EE               [12]  186 	mov	a,r6
      00005B F2               [24]  187 	movx	@r0,a
      00005C 08               [12]  188 	inc	r0
      00005D EF               [12]  189 	mov	a,r7
      00005E F2               [24]  190 	movx	@r0,a
      00005F                        191 00105$:
      00005F 8B 02            [24]  192 	mov	ar2,r3
      000061 8C 07            [24]  193 	mov	ar7,r4
      000063 1B               [12]  194 	dec	r3
      000064 BB FF 01         [24]  195 	cjne	r3,#0xFF,00131$
      000067 1C               [12]  196 	dec	r4
      000068                        197 00131$:
      000068 EA               [12]  198 	mov	a,r2
      000069 4F               [12]  199 	orl	a,r7
      00006A 60 1D            [24]  200 	jz	00107$
                                    201 ;	_strncpy.c:47: *d++ = '\0' ;
      00006C 78r05            [12]  202 	mov	r0,#_strncpy_d_1_21
      00006E E2               [24]  203 	movx	a,@r0
      00006F F5 82            [12]  204 	mov	dpl,a
      000071 08               [12]  205 	inc	r0
      000072 E2               [24]  206 	movx	a,@r0
      000073 F5 83            [12]  207 	mov	dph,a
      000075 08               [12]  208 	inc	r0
      000076 E2               [24]  209 	movx	a,@r0
      000077 F5 F0            [12]  210 	mov	b,a
      000079 E4               [12]  211 	clr	a
      00007A 12r00r00         [24]  212 	lcall	__gptrput
      00007D A3               [24]  213 	inc	dptr
      00007E 18               [12]  214 	dec	r0
      00007F 18               [12]  215 	dec	r0
      000080 E5 82            [12]  216 	mov	a,dpl
      000082 F2               [24]  217 	movx	@r0,a
      000083 08               [12]  218 	inc	r0
      000084 E5 83            [12]  219 	mov	a,dph
      000086 F2               [24]  220 	movx	@r0,a
      000087 80 D6            [24]  221 	sjmp	00105$
      000089                        222 00107$:
                                    223 ;	_strncpy.c:49: return d1;
      000089 78r08            [12]  224 	mov	r0,#_strncpy_d1_1_22
      00008B E2               [24]  225 	movx	a,@r0
      00008C F5 82            [12]  226 	mov	dpl,a
      00008E 08               [12]  227 	inc	r0
      00008F E2               [24]  228 	movx	a,@r0
      000090 F5 83            [12]  229 	mov	dph,a
      000092 08               [12]  230 	inc	r0
      000093 E2               [24]  231 	movx	a,@r0
      000094 F5 F0            [12]  232 	mov	b,a
      000096 22               [24]  233 	ret
                                    234 	.area CSEG    (CODE)
                                    235 	.area CONST   (CODE)
                                    236 	.area XINIT   (CODE)
                                    237 	.area CABS    (ABS,CODE)
