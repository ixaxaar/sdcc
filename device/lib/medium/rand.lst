                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.3.1 #8898 (Nov 27 2013) (Linux)
                                      4 ; This file was generated Wed Nov 27 12:27:53 2013
                                      5 ;--------------------------------------------------------
                                      6 	.module rand
                                      7 	.optsdcc -mmcs51 --model-medium
                                      8 	
                                      9 ;--------------------------------------------------------
                                     10 ; Public variables in this module
                                     11 ;--------------------------------------------------------
                                     12 	.globl _rand
                                     13 	.globl _srand
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 	.area RSEG    (ABS,DATA)
      000000                         18 	.org 0x0000
                                     19 ;--------------------------------------------------------
                                     20 ; special function bits
                                     21 ;--------------------------------------------------------
                                     22 	.area RSEG    (ABS,DATA)
      000000                         23 	.org 0x0000
                                     24 ;--------------------------------------------------------
                                     25 ; overlayable register banks
                                     26 ;--------------------------------------------------------
                                     27 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         28 	.ds 8
                                     29 ;--------------------------------------------------------
                                     30 ; internal ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area DSEG    (DATA)
                                     33 ;--------------------------------------------------------
                                     34 ; overlayable items in internal ram 
                                     35 ;--------------------------------------------------------
                                     36 ;--------------------------------------------------------
                                     37 ; indirectly addressable internal ram data
                                     38 ;--------------------------------------------------------
                                     39 	.area ISEG    (DATA)
                                     40 ;--------------------------------------------------------
                                     41 ; absolute internal ram data
                                     42 ;--------------------------------------------------------
                                     43 	.area IABS    (ABS,DATA)
                                     44 	.area IABS    (ABS,DATA)
                                     45 ;--------------------------------------------------------
                                     46 ; bit data
                                     47 ;--------------------------------------------------------
                                     48 	.area BSEG    (BIT)
                                     49 ;--------------------------------------------------------
                                     50 ; paged external ram data
                                     51 ;--------------------------------------------------------
                                     52 	.area PSEG    (PAG,XDATA)
      000000                         53 _next:
      000000                         54 	.ds 4
                                     55 ;--------------------------------------------------------
                                     56 ; external ram data
                                     57 ;--------------------------------------------------------
                                     58 	.area XSEG    (XDATA)
                                     59 ;--------------------------------------------------------
                                     60 ; absolute external ram data
                                     61 ;--------------------------------------------------------
                                     62 	.area XABS    (ABS,XDATA)
                                     63 ;--------------------------------------------------------
                                     64 ; external initialized ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area XISEG   (XDATA)
                                     67 	.area HOME    (CODE)
                                     68 	.area GSINIT0 (CODE)
                                     69 	.area GSINIT1 (CODE)
                                     70 	.area GSINIT2 (CODE)
                                     71 	.area GSINIT3 (CODE)
                                     72 	.area GSINIT4 (CODE)
                                     73 	.area GSINIT5 (CODE)
                                     74 	.area GSINIT  (CODE)
                                     75 	.area GSFINAL (CODE)
                                     76 	.area CSEG    (CODE)
                                     77 ;--------------------------------------------------------
                                     78 ; global & static initialisations
                                     79 ;--------------------------------------------------------
                                     80 	.area HOME    (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 	.area GSFINAL (CODE)
                                     83 	.area GSINIT  (CODE)
                                     84 ;	rand.c:31: static unsigned long int next = 1;
      000000 78r00            [12]   85 	mov	r0,#_next
      000002 74 01            [12]   86 	mov	a,#0x01
      000004 F2               [24]   87 	movx	@r0,a
      000005 08               [12]   88 	inc	r0
      000006 E4               [12]   89 	clr	a
      000007 F2               [24]   90 	movx	@r0,a
      000008 08               [12]   91 	inc	r0
      000009 F2               [24]   92 	movx	@r0,a
      00000A 08               [12]   93 	inc	r0
      00000B F2               [24]   94 	movx	@r0,a
                                     95 ;--------------------------------------------------------
                                     96 ; Home
                                     97 ;--------------------------------------------------------
                                     98 	.area HOME    (CODE)
                                     99 	.area HOME    (CODE)
                                    100 ;--------------------------------------------------------
                                    101 ; code
                                    102 ;--------------------------------------------------------
                                    103 	.area CSEG    (CODE)
                                    104 ;------------------------------------------------------------
                                    105 ;Allocation info for local variables in function 'rand'
                                    106 ;------------------------------------------------------------
                                    107 ;	rand.c:33: int rand(void)
                                    108 ;	-----------------------------------------
                                    109 ;	 function rand
                                    110 ;	-----------------------------------------
      000000                        111 _rand:
                           000007   112 	ar7 = 0x07
                           000006   113 	ar6 = 0x06
                           000005   114 	ar5 = 0x05
                           000004   115 	ar4 = 0x04
                           000003   116 	ar3 = 0x03
                           000002   117 	ar2 = 0x02
                           000001   118 	ar1 = 0x01
                           000000   119 	ar0 = 0x00
                                    120 ;	rand.c:35: next = next * 1103515245UL + 12345;
      000000 78r00            [12]  121 	mov	r0,#_next
      000002 79r00            [12]  122 	mov	r1,#__mullong_PARM_2
      000004 E2               [24]  123 	movx	a,@r0
      000005 F3               [24]  124 	movx	@r1,a
      000006 08               [12]  125 	inc	r0
      000007 E2               [24]  126 	movx	a,@r0
      000008 09               [12]  127 	inc	r1
      000009 F3               [24]  128 	movx	@r1,a
      00000A 08               [12]  129 	inc	r0
      00000B E2               [24]  130 	movx	a,@r0
      00000C 09               [12]  131 	inc	r1
      00000D F3               [24]  132 	movx	@r1,a
      00000E 08               [12]  133 	inc	r0
      00000F E2               [24]  134 	movx	a,@r0
      000010 09               [12]  135 	inc	r1
      000011 F3               [24]  136 	movx	@r1,a
      000012 90 4E 6D         [24]  137 	mov	dptr,#0x4E6D
      000015 75 F0 C6         [24]  138 	mov	b,#0xC6
      000018 74 41            [12]  139 	mov	a,#0x41
      00001A 12r00r00         [24]  140 	lcall	__mullong
      00001D AC 82            [24]  141 	mov	r4,dpl
      00001F AD 83            [24]  142 	mov	r5,dph
      000021 AE F0            [24]  143 	mov	r6,b
      000023 FF               [12]  144 	mov	r7,a
      000024 78r00            [12]  145 	mov	r0,#_next
      000026 74 39            [12]  146 	mov	a,#0x39
      000028 2C               [12]  147 	add	a,r4
      000029 F2               [24]  148 	movx	@r0,a
      00002A 74 30            [12]  149 	mov	a,#0x30
      00002C 3D               [12]  150 	addc	a,r5
      00002D 08               [12]  151 	inc	r0
      00002E F2               [24]  152 	movx	@r0,a
      00002F E4               [12]  153 	clr	a
      000030 3E               [12]  154 	addc	a,r6
      000031 08               [12]  155 	inc	r0
      000032 F2               [24]  156 	movx	@r0,a
      000033 E4               [12]  157 	clr	a
      000034 3F               [12]  158 	addc	a,r7
      000035 08               [12]  159 	inc	r0
      000036 F2               [24]  160 	movx	@r0,a
                                    161 ;	rand.c:36: return (unsigned int)(next/65536) % (RAND_MAX + 1U);
      000037 78r02            [12]  162 	mov	r0,#(_next + 2)
      000039 E2               [24]  163 	movx	a,@r0
      00003A FC               [12]  164 	mov	r4,a
      00003B 08               [12]  165 	inc	r0
      00003C E2               [24]  166 	movx	a,@r0
      00003D FD               [12]  167 	mov	r5,a
      00003E 8C 82            [24]  168 	mov	dpl,r4
      000040 74 7F            [12]  169 	mov	a,#0x7F
      000042 5D               [12]  170 	anl	a,r5
      000043 F5 83            [12]  171 	mov	dph,a
      000045 22               [24]  172 	ret
                                    173 ;------------------------------------------------------------
                                    174 ;Allocation info for local variables in function 'srand'
                                    175 ;------------------------------------------------------------
                                    176 ;	rand.c:39: void srand(unsigned int seed)
                                    177 ;	-----------------------------------------
                                    178 ;	 function srand
                                    179 ;	-----------------------------------------
      000046                        180 _srand:
      000046 AE 82            [24]  181 	mov	r6,dpl
      000048 AF 83            [24]  182 	mov	r7,dph
                                    183 ;	rand.c:41: next = seed;
      00004A 78r00            [12]  184 	mov	r0,#_next
      00004C EE               [12]  185 	mov	a,r6
      00004D F2               [24]  186 	movx	@r0,a
      00004E 08               [12]  187 	inc	r0
      00004F EF               [12]  188 	mov	a,r7
      000050 F2               [24]  189 	movx	@r0,a
      000051 08               [12]  190 	inc	r0
      000052 E4               [12]  191 	clr	a
      000053 F2               [24]  192 	movx	@r0,a
      000054 08               [12]  193 	inc	r0
      000055 F2               [24]  194 	movx	@r0,a
      000056 22               [24]  195 	ret
                                    196 	.area CSEG    (CODE)
                                    197 	.area CONST   (CODE)
                                    198 	.area XINIT   (CODE)
                                    199 	.area CABS    (ABS,CODE)
